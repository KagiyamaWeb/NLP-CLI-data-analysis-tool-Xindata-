# Freelancer Analytics CLI

## Функции
- Создания запросов на основе естественного языка
- Анализ данных
- Генерация отчетов

## Структура проекта

```
├── src/
│   ├── data_processor.py   # Преобразование данных
│   ├── query_parser.py     # NLP query
│   └── response_generator.py # Генерация репорта
├── main.py                 # CLI entry point
├── requirements.txt        # Зависимости
└── .env.example            # Шаблон .env файла
```

## Использование
```bash
cp .env.example .env

python -m venv .venv
source .venv/bin/activate
pip install -r requirements.txt
```

```bash
./analyze.sh "<ваш запрос>"
```

## Отчет о реализации
Прогорамма использует LLM для генерации кода для анализа данных на основе естественноязыкового запроса, а затем выполняет этот код с помощью безопасного интерпретатора Python и генерирует короткое описание на естественном языке.

### Выбранный подход
1. **Архитектура системы**:
   - CLI интерфейс для естественноязыковых запросов
   - Модульная структура (data processing, query parsing, response generation)
   - Безопасное выполнение LLM-генерируемого кода

2. **Интеграция LLM**:
   - Google Gemini для генерации pandas-кода
   - Контекстная подсказка с информацией о структуре данных
   - Многоуровневая валидация генерируемого кода

3. **Работа с данными**:
   - Препроцессинг данных (нормализация числовых полей, обработка пропусков)
   - Использование pandas для аналитических запросов
   - Безопасное выполнение LLM-генерируемого кода

### Эффективность и точность
- **Сильные стороны**:
  - Поддержка сложных аналитических запросов
  - Защита от небезопасного кода
  - Читаемый вывод с данными и интерпретацией

- **Ограничения**:
  - Зависимость от качества LLM-генерации
  - Обработка только структурированных запросов

### Критерии оценки качества
1. **Качество кода**:
   - Соответствие PEP8
   - Модульность и повторное использование
   - Полнота обработки ошибок

2. **Функциональность**:
   - Поддержка примеров запросов из ТЗ
   - Стабильность выполнения

3. **Документация**:
   - Полнота описания архитектуры
   - Ясность инструкций по запуску

## Требуемые API ключи
- Google Gemini


## Примеры запросов:
"Насколько выше доход у фрилансеров, принимающих оплату в криптовалюте, по сравнению с другими способами оплаты?"
```bash
Ответ на запрос "Насколько выше доход у фрилансеров, принимающих оплату в криптовалюте, по сравнению с другими способами оплаты?":
            ----------------------------------------    
            Данные:
            Crypto_Average_Earnings    5139.301556
Other_Average_Earnings     4973.993036
Earnings_Difference         165.308520
Percentage_Difference         3.323457
dtype: float64
            
            Анализ:
            Средний доход фрилансеров, принимающих оплату в криптовалюте, составляет 5139.30 долларов США.  Средний доход фрилансеров, использующих другие способы оплаты, составляет 4973.99 долларов США. Разница в доходах составляет 165.31 долларов США.  Доход фрилансеров, использующих криптовалюту, в среднем выше на 3.32%.
            ----------------------------------------
```
"Как распределяется доход фрилансеров в зависимости от региона проживания?"
```bash
Ответ на запрос "Как распределяется доход фрилансеров в зависимости от региона проживания?":
            ----------------------------------------    
            Данные:
            Client_Region
Canada         5350.134146
Asia           5172.284698
UK             5047.089286
Australia      4966.097315
Europe         4890.530534
USA            4872.948630
Middle East    4870.817869
Name: Earnings_USD, dtype: float64
            
            Анализ:
            Этот анализ показывает средний доход фрилансеров в зависимости от региона клиента.  Результаты отсортированы по убыванию, чтобы показать регионы, где фрилансеры в среднем зарабатывают больше всего. Таким образом, можно увидеть, какие регионы являются наиболее прибыльными для фрилансеров, сотрудничающих с клиентами из этих регионов. Значения в столбце 'Earnings_USD' представляют собой средний доход в долларах США для каждого региона клиента.
```
Какой процент экспертов выполнил меньше 100 проектов?
```bash
Ответ на запрос "Какой процент экспертов выполнил меньше 100 проектов?":
            ----------------------------------------    
            Данные:
            percentage    33.853354
            dtype: float64
            
            Анализ:
            Среди фрилансеров с уровнем опыта 'Expert', 33.85% выполнили менее 100 проектов.
            ----------------------------------------
```
Какая средняя почасовая оплата в разных регионах?
```bash
Ответ на запрос "Какая средняя почасовая оплата в разных регионах?":
            ----------------------------------------    
            Данные:
            Client_Region
Asia           53.291886
Australia      52.236275
Canada         48.941626
Europe         52.361489
Middle East    54.509210
UK             52.364964
USA            53.789075
Name: Hourly_Rate, dtype: float64
            
            Анализ:
            Этот код рассчитывает среднюю почасовую ставку для фрилансеров в каждом регионе, где находятся клиенты. Результат показывает, сколько в среднем зарабатывает фрилансер в час, работая с клиентами из определенного региона. Группировка выполняется по столбцу 'Client_Region', а затем вычисляется среднее значение столбца 'Hourly_Rate' для каждой группы.
            ----------------------------------------
```

